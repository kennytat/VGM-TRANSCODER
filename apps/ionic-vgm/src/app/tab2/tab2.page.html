<ion-content [fullscreen]="true" class="tab-content">
  <ion-grid>
    <ion-row class="row">
      <ion-col class="col">
        <ion-card class="card">
          <ion-item>
            <ion-icon name="git-network-outline" slot="start"></ion-icon>
            <ion-label>Database Connection</ion-label>
            <ion-button fill="outline" slot="end" (click)="connectGQL()"
              >Refresh</ion-button
            >
            <ion-card-content> </ion-card-content>
          </ion-item>

          <ion-item>
            <ion-button
              color="{{videoBtnColor}}"
              class="data-btn"
              (click)="showDiv('V')"
              >Video</ion-button
            >
            <ion-button
              color="{{audioBtnColor}}"
              class="data-btn"
              (click)="showDiv('A')"
              >Audio</ion-button
            >
          </ion-item>
          <div style="position: relative">
            <div *ngIf="video; else audio" class="data-content">
              <ngx-treeview
                [items]="videoTree"
                [config]="config"
                (selectedChange)="treeSelectedChange($event)"
                (filterChange)="treeFilterChange($event)"
              >
              </ngx-treeview>
            </div>

            <ng-template #audio>
              <div class="data-content">
                <ngx-treeview
                  [items]="audioTree"
                  [config]="config"
                  (selectedChange)="treeSelectedChange($event)"
                  (filterChange)="treeFilterChange($event)"
                >
                </ngx-treeview>
              </div>
            </ng-template>

            <div *ngIf="infoBtn" class="info-btn">
              <div>
                <ion-label
                  >FILE INFO (<span>{{ selectedFileCount }}</span>
                  selected)</ion-label
                >
              </div>
              <div>
                <ion-button
                  size="small"
                  color="success"
                  shape="round"
                  style="font-size: xx-small"
                  >publish</ion-button
                >
                <ion-button
                  size="small"
                  color="danger"
                  shape="round"
                  style="font-size: xx-small"
                  >unpublish</ion-button
                >
              </div>
            </div>
            <div class="data-info">
              <ion-item>
                <ion-grid>
                  <ion-row *ngIf="dataInfo">
                    <ion-col>
                      <div
                        *ngFor="let file of selectedFileInfo"
                        class="file-info"
                      >
                        <div>
                          <ion-label>Category</ion-label>
                          <select [disabled]="disable">
                            <option
                              value="{{file.topic[0].classes[0].id}}"
                              selected
                              disabled
                            >
                              {{file.topic[0].classes[0].name}}
                            </option>
                            <option
                              *ngFor="let class of displayDB.children"
                              value="{{class.value}}"
                            >
                              {{class.text}}
                            </option>
                          </select>
                        </div>
                        <div>
                          <ion-label>Topic</ion-label>
                          <select [disabled]="disable">
                            <option
                              value="{{file.topic[0].id}}"
                              selected
                              disabled
                            >
                              {{file.topic[0].name}}
                            </option>
                            <option
                              *ngFor="let topic of displayDB.children[0].children"
                              value="{{topic.value}}"
                            >
                              {{topic.text}}
                            </option>
                          </select>
                        </div>
                        <div>
                          <ion-label>Name</ion-label>
                          <input
                            placeholder="{{file.name}}"
                            value=""
                            [disabled]="disable"
                          />
                        </div>
                        <div>
                          <ion-label>Publish</ion-label>
                          <input
                            placeholder="{{ file.qm !== null ? file.qm : 'unpublished' }}"
                            value=""
                            disabled
                          />
                        </div>
                        <div>
                          <ion-label>Updated</ion-label>
                          <input
                            placeholder="{{file.updatedAt | date }}"
                            value=""
                            disabled
                          />
                        </div>
                        <div>
                          <ion-label>Local</ion-label>
                          <input
                            placeholder="{{file.folder}}"
                            value=""
                            disabled
                          />
                        </div>
                        <div>
                          <ion-label>Verse</ion-label>
                          <input
                            placeholder="{{file.verse}}"
                            value=""
                            [disabled]="disable"
                          />
                        </div>
                        <div>
                          <ion-label>Duration</ion-label>
                          <input
                            placeholder="{{file.duration}}"
                            value=""
                            disabled
                          />
                        </div>
                        <div>
                          <ion-label>Size</ion-label>
                          <input
                            placeholder="{{file.size}}"
                            value=""
                            disabled
                          />
                        </div>
                      </div>
                    </ion-col>
                    <ion-col size="auto">
                      <ion-button
                        size="small"
                        color="warning"
                        shape="round"
                        style="font-size: xx-small"
                        expand="block"
                        (click)="editDB()"
                        *ngIf="editDBBtn; else updateDBBtn"
                        >edit</ion-button
                      >
                      <ng-template #updateDBBtn>
                        <ion-button
                          size="small"
                          color="success"
                          shape="round"
                          style="font-size: xx-small"
                          expand="block"
                          (click)="updateDB()"
                          >update</ion-button
                        >
                        <ion-button
                          size="small"
                          color="danger"
                          shape="round"
                          style="font-size: xx-small"
                          expand="block"
                          (click)="deleteDB()"
                          >delete</ion-button
                        >
                      </ng-template>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>
            </div>
          </div>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
