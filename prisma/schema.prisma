generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Media {
  id         String     @id @default(uuid())
  pid        String     @default("none")
  dblevel    Int        @default(0)
  name       String
  origin     String?
  folder     String?
  qm         String?    @unique
  categories Category[]
}

model Category {
  id         String           @id @default(uuid())
  parent     Media            @relation(fields: [pid], references: [id])
  dblevel    Int              @default(1)
  pid        String
  name       String
  origin     String?
  folder     String?
  qm         String?          @unique
  foldertype String
  classes    Classification[]

  @@unique([pid, name])
}

model Classification {
  id         String   @id @default(uuid())
  parent     Category @relation(fields: [pid], references: [id])
  dblevel    Int      @default(2)
  pid        String
  name       String
  origin     String?
  folder     String?
  qm         String?  @unique
  foldertype String
  topics     Topic[]

  @@unique([pid, name])
}

model Topic {
  id         String         @id @default(uuid())
  parent     Classification @relation(fields: [pid], references: [id])
  dblevel    Int            @default(3)
  pid        String
  name       String
  origin     String?
  folder     String?
  qm         String?        @unique
  foldertype String
  contents   Content[]

  @@unique([pid, name])
}

model Content {
  id        String   @id @default(uuid())
  parent    Topic    @relation(fields: [pid], references: [id])
  dblevel   Int      @default(4)
  pid       String
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  qm        String?  @unique
  duration  String
  size      String
  origin    String?
  folder    String?
  verse     String
  thumb     String
  filetype  String
}
